<div class="main-app">
  <!-- Top Navigation Bar -->
  <mat-toolbar class="top-bar">
    <div class="top-bar-content">
      <div class="top-bar-left">
        <div class="brand" (click)="goHome()">
          <mat-icon class="brand-icon">rocket_launch</mat-icon>
          <span class="brand-text">CollabX</span>
        </div>
        <div class="workspace-info">
          <span class="workspace-name">{{ currentWorkspace?.name || 'My Workspace' }}</span>
        </div>
      </div>
      
      <div class="top-bar-center">
        <div class="search-container">
          <mat-icon class="search-icon">search</mat-icon>
          <input 
            type="text" 
            placeholder="Search tasks, projects, or people..." 
            class="search-input"
            (focus)="onSearchFocus()">
        </div>
      </div>
      
      <div class="top-bar-right">
        <button mat-icon-button [matMenuTriggerFor]="userMenu">
          <div class="user-avatar">
            <span>{{ currentUser?.full_name?.charAt(0) || 'U' }}</span>
          </div>
        </button>
        
        <mat-menu #userMenu="matMenu">
          <div class="user-menu-header">
            <div class="user-info">
              <div class="user-avatar-large">
                <span>{{ currentUser?.full_name?.charAt(0) || 'U' }}</span>
              </div>
              <div class="user-details">
                <div class="user-name">{{ currentUser?.full_name || 'User' }}</div>
                <div class="user-email">{{ currentUser?.email || 'user@example.com' }}</div>
              </div>
            </div>
          </div>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="openHelp()">
            <mat-icon>help</mat-icon>
            <span>Help & Support</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Sign out</span>
          </button>
        </mat-menu>
      </div>
    </div>
  </mat-toolbar>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Sidebar -->
    <div class="sidebar">
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3 class="nav-section-title">Workspace</h3>
          <button class="nav-item" [class.active]="currentView === 'tasks'" (click)="navigateToTasks()">
            <mat-icon>task_alt</mat-icon>
            <span>Tasks</span>
          </button>
          <button class="nav-item" [class.active]="currentView === 'projects'" (click)="navigateToProjects()">
            <mat-icon>folder</mat-icon>
            <span>Projects</span>
          </button>
          <button class="nav-item" [class.active]="currentView === 'team'" (click)="navigateToTeam()">
            <mat-icon>group</mat-icon>
            <span>Team</span>
          </button>
        </div>
        
        <div class="nav-section">
          <h3 class="nav-section-title">Quick Access</h3>
          <button class="nav-item" [class.active]="currentView === 'calendar'" (click)="navigateToCalendar()">
            <mat-icon>calendar_today</mat-icon>
            <span>Calendar</span>
          </button>
          <button class="nav-item" [class.active]="currentView === 'reports'" (click)="navigateToReports()">
            <mat-icon>analytics</mat-icon>
            <span>Reports</span>
          </button>
          <button class="nav-item" [class.active]="currentView === 'files'" (click)="navigateToFiles()">
            <mat-icon>folder_open</mat-icon>
            <span>Files</span>
          </button>
        </div>
      </nav>
    </div>

    <!-- Content Area -->
    <div class="content-area">
      <app-task-management *ngIf="currentView === 'tasks'"></app-task-management>
      <app-projects *ngIf="currentView === 'projects'"></app-projects>
      <app-team *ngIf="currentView === 'team'"></app-team>
      <div *ngIf="currentView === 'calendar'" class="coming-soon">
        <div class="coming-soon-content">
          <mat-icon>calendar_today</mat-icon>
          <h2>Calendar View</h2>
          <p>Calendar functionality coming soon!</p>
        </div>
      </div>
      <div *ngIf="currentView === 'reports'" class="coming-soon">
        <div class="coming-soon-content">
          <mat-icon>analytics</mat-icon>
          <h2>Reports & Analytics</h2>
          <p>Advanced reporting features coming soon!</p>
        </div>
      </div>
      <div *ngIf="currentView === 'files'" class="coming-soon">
        <div class="coming-soon-content">
          <mat-icon>folder_open</mat-icon>
          <h2>File Manager</h2>
          <p>File management system coming soon!</p>
        </div>
      </div>
    </div>
  </div>
</div>
